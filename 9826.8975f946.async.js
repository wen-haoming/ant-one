"use strict";(self.webpackChunkantd_one=self.webpackChunkantd_one||[]).push([[9826],{29826:function(Ie,z,T){T.r(z),T.d(z,{Adapter:function(){return K},CodeActionAdaptor:function(){return ce},DefinitionAdapter:function(){return se},DiagnosticsAdapter:function(){return q},FormatAdapter:function(){return oe},FormatHelper:function(){return W},FormatOnTypeAdapter:function(){return le},InlayHintsAdapter:function(){return pe},Kind:function(){return y},LibFiles:function(){return Z},OccurrencesAdapter:function(){return ie},OutlineAdapter:function(){return ue},QuickInfoAdapter:function(){return te},ReferenceAdapter:function(){return ae},RenameAdapter:function(){return de},SignatureHelpAdapter:function(){return ne},SuggestAdapter:function(){return ee},WorkerManager:function(){return Y},flattenDiagnosticMessageText:function(){return $},getJavaScriptWorker:function(){return Ce},getTypeScriptWorker:function(){return De},setupJavaScript:function(){return Se},setupTypeScript:function(){return we}});var G=T(30279),fe=T(88226),B=T(47722),F=T(76779),M=T(46332),D=T(35290),I=T(411),P=T(9189),O=T(58482),R=T(9522),x=T(69946),J=T(12214),Pe=T(50959),Oe=T(61891),me=Object.defineProperty,he=function(a,e,n){return e in a?me(a,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[e]=n},N=function(a,e,n){return he(a,x(e)!="symbol"?e+"":e,n),n};var Q=Object.defineProperty,_e=Object.getOwnPropertyDescriptor,be=Object.getOwnPropertyNames,ve=Object.prototype.hasOwnProperty,ye=function(a,e,n){return e in a?Q(a,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[e]=n},X=function(a,e,n,s){if(e&&x(e)=="object"||typeof e=="function"){var t=R(be(e)),r;try{var i=function(){var b=r.value;!ve.call(a,b)&&b!==n&&Q(a,b,{get:function(){return e[b]},enumerable:!(s=_e(e,b))||s.enumerable})};for(t.s();!(r=t.n()).done;)i()}catch(f){t.e(f)}finally{t.f()}}return a},ke=function(a,e,n){return X(a,e,"default"),n&&X(n,e,"default")},A=function(a,e,n){return ye(a,x(e)!="symbol"?e+"":e,n),n},c={};ke(c,J.m);var Y=function(){function l(a,e){var n=this;P(this,l),N(this,"_configChangeListener"),N(this,"_updateExtraLibsToken"),N(this,"_extraLibsChangeListener"),N(this,"_worker"),N(this,"_client"),this._modeId=a,this._defaults=e,this._worker=null,this._client=null,this._configChangeListener=this._defaults.onDidChange(function(){return n._stopWorker()}),this._updateExtraLibsToken=0,this._extraLibsChangeListener=this._defaults.onDidExtraLibsChange(function(){return n._updateExtraLibs()})}return O(l,[{key:"dispose",value:function(){this._configChangeListener.dispose(),this._extraLibsChangeListener.dispose(),this._stopWorker()}},{key:"_stopWorker",value:function(){this._worker&&(this._worker.dispose(),this._worker=null),this._client=null}},{key:"_updateExtraLibs",value:function(){var a=I(D().mark(function n(){var s,t;return D().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(this._worker){i.next=2;break}return i.abrupt("return");case 2:return s=++this._updateExtraLibsToken,i.next=5,this._worker.getProxy();case 5:t=i.sent,this._updateExtraLibsToken===s&&t.updateExtraLibs(this._defaults.getExtraLibs());case 7:case"end":return i.stop()}},n,this)}));function e(){return a.apply(this,arguments)}return e}()},{key:"_getClient",value:function(){var e=this;return this._client||(this._client=I(D().mark(function n(){return D().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e._worker=c.editor.createWebWorker({moduleId:"vs/language/typescript/tsWorker",label:e._modeId,keepIdleModels:!0,createData:{compilerOptions:e._defaults.getCompilerOptions(),extraLibs:e._defaults.getExtraLibs(),customWorkerPath:e._defaults.workerOptions.customWorkerPath,inlayHintsOptions:e._defaults.inlayHintsOptions}}),!e._defaults.getEagerModelSync()){t.next=7;break}return t.next=4,e._worker.withSyncedResources(c.editor.getModels().filter(function(r){return r.getLanguageId()===e._modeId}).map(function(r){return r.uri}));case 4:t.t0=t.sent,t.next=10;break;case 7:return t.next=9,e._worker.getProxy();case 9:t.t0=t.sent;case 10:return t.abrupt("return",t.t0);case 11:case"end":return t.stop()}},n)}))()),this._client}},{key:"getLanguageServiceWorker",value:function(){var a=I(D().mark(function n(){var s,t,r,i,f=arguments;return D().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,this._getClient();case 2:for(s=m.sent,t=f.length,r=new Array(t),i=0;i<t;i++)r[i]=f[i];if(m.t0=this._worker,!m.t0){m.next=8;break}return m.next=8,this._worker.withSyncedResources(r);case 8:return m.abrupt("return",s);case 9:case"end":return m.stop()}},n,this)}));function e(){return a.apply(this,arguments)}return e}()}]),l}(),_={};_["lib.d.ts"]=!0,_["lib.dom.d.ts"]=!0,_["lib.dom.iterable.d.ts"]=!0,_["lib.es2015.collection.d.ts"]=!0,_["lib.es2015.core.d.ts"]=!0,_["lib.es2015.d.ts"]=!0,_["lib.es2015.generator.d.ts"]=!0,_["lib.es2015.iterable.d.ts"]=!0,_["lib.es2015.promise.d.ts"]=!0,_["lib.es2015.proxy.d.ts"]=!0,_["lib.es2015.reflect.d.ts"]=!0,_["lib.es2015.symbol.d.ts"]=!0,_["lib.es2015.symbol.wellknown.d.ts"]=!0,_["lib.es2016.array.include.d.ts"]=!0,_["lib.es2016.d.ts"]=!0,_["lib.es2016.full.d.ts"]=!0,_["lib.es2017.d.ts"]=!0,_["lib.es2017.full.d.ts"]=!0,_["lib.es2017.intl.d.ts"]=!0,_["lib.es2017.object.d.ts"]=!0,_["lib.es2017.sharedmemory.d.ts"]=!0,_["lib.es2017.string.d.ts"]=!0,_["lib.es2017.typedarrays.d.ts"]=!0,_["lib.es2018.asyncgenerator.d.ts"]=!0,_["lib.es2018.asynciterable.d.ts"]=!0,_["lib.es2018.d.ts"]=!0,_["lib.es2018.full.d.ts"]=!0,_["lib.es2018.intl.d.ts"]=!0,_["lib.es2018.promise.d.ts"]=!0,_["lib.es2018.regexp.d.ts"]=!0,_["lib.es2019.array.d.ts"]=!0,_["lib.es2019.d.ts"]=!0,_["lib.es2019.full.d.ts"]=!0,_["lib.es2019.object.d.ts"]=!0,_["lib.es2019.string.d.ts"]=!0,_["lib.es2019.symbol.d.ts"]=!0,_["lib.es2020.bigint.d.ts"]=!0,_["lib.es2020.d.ts"]=!0,_["lib.es2020.full.d.ts"]=!0,_["lib.es2020.intl.d.ts"]=!0,_["lib.es2020.promise.d.ts"]=!0,_["lib.es2020.sharedmemory.d.ts"]=!0,_["lib.es2020.string.d.ts"]=!0,_["lib.es2020.symbol.wellknown.d.ts"]=!0,_["lib.es2021.d.ts"]=!0,_["lib.es2021.full.d.ts"]=!0,_["lib.es2021.intl.d.ts"]=!0,_["lib.es2021.promise.d.ts"]=!0,_["lib.es2021.string.d.ts"]=!0,_["lib.es2021.weakref.d.ts"]=!0,_["lib.es5.d.ts"]=!0,_["lib.es6.d.ts"]=!0,_["lib.esnext.d.ts"]=!0,_["lib.esnext.full.d.ts"]=!0,_["lib.esnext.intl.d.ts"]=!0,_["lib.esnext.promise.d.ts"]=!0,_["lib.esnext.string.d.ts"]=!0,_["lib.esnext.weakref.d.ts"]=!0,_["lib.scripthost.d.ts"]=!0,_["lib.webworker.d.ts"]=!0,_["lib.webworker.importscripts.d.ts"]=!0,_["lib.webworker.iterable.d.ts"]=!0;function $(l,a){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;if(typeof l=="string")return l;if(l===void 0)return"";var n="";if(e){n+=a;for(var s=0;s<e;s++)n+="  "}if(n+=l.messageText,e++,l.next){var t=R(l.next),r;try{for(t.s();!(r=t.n()).done;){var i=r.value;n+=$(i,a,e)}}catch(f){t.e(f)}finally{t.f()}}return n}function H(l){return l?l.map(function(a){return a.text}).join(""):""}var K=function(){function l(a){P(this,l),this._worker=a}return O(l,[{key:"_textSpanToRange",value:function(e,n){var s=e.getPositionAt(n.start),t=e.getPositionAt(n.start+n.length),r=s.lineNumber,i=s.column,f=t.lineNumber,b=t.column;return{startLineNumber:r,startColumn:i,endLineNumber:f,endColumn:b}}}]),l}(),Z=function(){function l(a){P(this,l),N(this,"_libFiles"),N(this,"_hasFetchedLibFiles"),N(this,"_fetchLibFilesPromise"),this._worker=a,this._libFiles={},this._hasFetchedLibFiles=!1,this._fetchLibFilesPromise=null}return O(l,[{key:"isLibFile",value:function(e){return e&&e.path.indexOf("/lib.")===0?!!_[e.path.slice(1)]:!1}},{key:"getOrCreateModel",value:function(e){var n=c.Uri.parse(e),s=c.editor.getModel(n);if(s)return s;if(this.isLibFile(n)&&this._hasFetchedLibFiles)return c.editor.createModel(this._libFiles[n.path.slice(1)],"typescript",n);var t=J.t.getExtraLibs()[e];return t?c.editor.createModel(t.content,"typescript",n):null}},{key:"_containsLibFile",value:function(e){var n=R(e),s;try{for(n.s();!(s=n.n()).done;){var t=s.value;if(this.isLibFile(t))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"fetchLibFilesIfNecessary",value:function(){var a=I(D().mark(function n(s){return D().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(r.t0=!this._containsLibFile(s),r.t0){r.next=4;break}return r.next=4,this._fetchLibFiles();case 4:case"end":return r.stop()}},n,this)}));function e(n){return a.apply(this,arguments)}return e}()},{key:"_fetchLibFiles",value:function(){var e=this;return this._fetchLibFilesPromise||(this._fetchLibFilesPromise=this._worker().then(function(n){return n.getLibFiles()}).then(function(n){e._hasFetchedLibFiles=!0,e._libFiles=n})),this._fetchLibFilesPromise}}]),l}(),q=function(l){F(e,l);var a=M(e);function e(n,s,t,r){var i;P(this,e),i=a.call(this,r),N(B(i),"_disposables",[]),N(B(i),"_listener",Object.create(null)),i._libFiles=n,i._defaults=s,i._selector=t;var f=function(o){if(o.getLanguageId()===t){var p=function(){var w=i._defaults.getDiagnosticsOptions(),k=w.onlyVisible;k?o.isAttachedToEditor()&&i._doValidate(o):i._doValidate(o)},d,g=o.onDidChangeContent(function(){clearTimeout(d),d=window.setTimeout(p,500)}),v=o.onDidChangeAttached(function(){var u=i._defaults.getDiagnosticsOptions(),w=u.onlyVisible;w&&(o.isAttachedToEditor()?p():c.editor.setModelMarkers(o,i._selector,[]))});i._listener[o.uri.toString()]={dispose:function(){g.dispose(),v.dispose(),clearTimeout(d)}},p()}},b=function(o){c.editor.setModelMarkers(o,i._selector,[]);var p=o.uri.toString();i._listener[p]&&(i._listener[p].dispose(),delete i._listener[p])};i._disposables.push(c.editor.onDidCreateModel(function(h){return f(h)})),i._disposables.push(c.editor.onWillDisposeModel(b)),i._disposables.push(c.editor.onDidChangeModelLanguage(function(h){b(h.model),f(h.model)})),i._disposables.push({dispose:function(){var o=R(c.editor.getModels()),p;try{for(o.s();!(p=o.n()).done;){var d=p.value;b(d)}}catch(g){o.e(g)}finally{o.f()}}});var m=function(){var o=R(c.editor.getModels()),p;try{for(o.s();!(p=o.n()).done;){var d=p.value;b(d),f(d)}}catch(g){o.e(g)}finally{o.f()}};return i._disposables.push(i._defaults.onDidChange(m)),i._disposables.push(i._defaults.onDidExtraLibsChange(m)),c.editor.getModels().forEach(function(h){return f(h)}),i}return O(e,[{key:"dispose",value:function(){this._disposables.forEach(function(s){return s&&s.dispose()}),this._disposables=[]}},{key:"_doValidate",value:function(){var n=I(D().mark(function t(r){var i=this,f,b,m,h,o,p,d,g,v;return D().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return w.next=2,this._worker(r.uri);case 2:if(f=w.sent,!r.isDisposed()){w.next=5;break}return w.abrupt("return");case 5:return b=[],m=this._defaults.getDiagnosticsOptions(),h=m.noSyntaxValidation,o=m.noSemanticValidation,p=m.noSuggestionDiagnostics,h||b.push(f.getSyntacticDiagnostics(r.uri.toString())),o||b.push(f.getSemanticDiagnostics(r.uri.toString())),p||b.push(f.getSuggestionDiagnostics(r.uri.toString())),w.next=9,Promise.all(b);case 9:if(d=w.sent,!(!d||r.isDisposed())){w.next=12;break}return w.abrupt("return");case 12:return g=d.reduce(function(k,S){return S.concat(k)},[]).filter(function(k){return(i._defaults.getDiagnosticsOptions().diagnosticCodesToIgnore||[]).indexOf(k.code)===-1}),v=g.map(function(k){return k.relatedInformation||[]}).reduce(function(k,S){return S.concat(k)},[]).map(function(k){return k.file?c.Uri.parse(k.file.fileName):null}),w.next=15,this._libFiles.fetchLibFilesIfNecessary(v);case 15:!r.isDisposed()&&c.editor.setModelMarkers(r,this._selector,g.map(function(k){return i._convertDiagnostics(r,k)}));case 16:case"end":return w.stop()}},t,this)}));function s(t){return n.apply(this,arguments)}return s}()},{key:"_convertDiagnostics",value:function(s,t){var r=t.start||0,i=t.length||1,f=s.getPositionAt(r),b=f.lineNumber,m=f.column,h=s.getPositionAt(r+i),o=h.lineNumber,p=h.column,d=[];return t.reportsUnnecessary&&d.push(c.MarkerTag.Unnecessary),t.reportsDeprecated&&d.push(c.MarkerTag.Deprecated),{severity:this._tsDiagnosticCategoryToMarkerSeverity(t.category),startLineNumber:b,startColumn:m,endLineNumber:o,endColumn:p,message:$(t.messageText,`
`),code:t.code.toString(),tags:d,relatedInformation:this._convertRelatedInformation(s,t.relatedInformation)}}},{key:"_convertRelatedInformation",value:function(s,t){var r=this;if(!t)return[];var i=[];return t.forEach(function(f){var b=s;if(f.file&&(b=r._libFiles.getOrCreateModel(f.file.fileName)),!!b){var m=f.start||0,h=f.length||1,o=b.getPositionAt(m),p=o.lineNumber,d=o.column,g=b.getPositionAt(m+h),v=g.lineNumber,u=g.column;i.push({resource:b.uri,startLineNumber:p,startColumn:d,endLineNumber:v,endColumn:u,message:$(f.messageText,`
`)})}}),i}},{key:"_tsDiagnosticCategoryToMarkerSeverity",value:function(s){switch(s){case 1:return c.MarkerSeverity.Error;case 3:return c.MarkerSeverity.Info;case 0:return c.MarkerSeverity.Warning;case 2:return c.MarkerSeverity.Hint}return c.MarkerSeverity.Info}}]),e}(K),ee=function(l){F(e,l);var a=M(e);function e(){return P(this,e),a.apply(this,arguments)}return O(e,[{key:"triggerCharacters",get:function(){return["."]}},{key:"provideCompletionItems",value:function(){var n=I(D().mark(function t(r,i,f,b){var m,h,o,p,d,g;return D().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return m=r.getWordUntilPosition(i),h=new c.Range(i.lineNumber,m.startColumn,i.lineNumber,m.endColumn),o=r.uri,p=r.getOffsetAt(i),u.next=6,this._worker(o);case 6:if(d=u.sent,!r.isDisposed()){u.next=9;break}return u.abrupt("return");case 9:return u.next=11,d.getCompletionsAtPosition(o.toString(),p);case 11:return g=u.sent,u.abrupt("return",!g||r.isDisposed()?void 0:{suggestions:g.entries.map(function(w){var k,S=h;if(w.replacementSpan){var L=r.getPositionAt(w.replacementSpan.start),C=r.getPositionAt(w.replacementSpan.start+w.replacementSpan.length);S=new c.Range(L.lineNumber,L.column,C.lineNumber,C.column)}var j=[];return((k=w.kindModifiers)==null?void 0:k.indexOf("deprecated"))!==-1&&j.push(c.languages.CompletionItemTag.Deprecated),{uri:o,position:i,offset:p,range:S,label:w.name,insertText:w.name,sortText:w.sortText,kind:e.convertKind(w.kind),tags:j}})});case 13:case"end":return u.stop()}},t,this)}));function s(t,r,i,f){return n.apply(this,arguments)}return s}()},{key:"resolveCompletionItem",value:function(){var n=I(D().mark(function t(r,i){var f,b,m,h,o;return D().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return f=r,b=f.uri,m=f.position,h=f.offset,d.next=6,this._worker(b);case 6:return d.next=8,d.sent.getCompletionEntryDetails(b.toString(),h,f.label);case 8:return o=d.sent,d.abrupt("return",o?{uri:b,position:m,label:o.name,kind:e.convertKind(o.kind),detail:H(o.displayParts),documentation:{value:e.createDocumentationString(o)}}:f);case 10:case"end":return d.stop()}},t,this)}));function s(t,r){return n.apply(this,arguments)}return s}()}],[{key:"convertKind",value:function(s){switch(s){case y.primitiveType:case y.keyword:return c.languages.CompletionItemKind.Keyword;case y.variable:case y.localVariable:return c.languages.CompletionItemKind.Variable;case y.memberVariable:case y.memberGetAccessor:case y.memberSetAccessor:return c.languages.CompletionItemKind.Field;case y.function:case y.memberFunction:case y.constructSignature:case y.callSignature:case y.indexSignature:return c.languages.CompletionItemKind.Function;case y.enum:return c.languages.CompletionItemKind.Enum;case y.module:return c.languages.CompletionItemKind.Module;case y.class:return c.languages.CompletionItemKind.Class;case y.interface:return c.languages.CompletionItemKind.Interface;case y.warning:return c.languages.CompletionItemKind.File}return c.languages.CompletionItemKind.Property}},{key:"createDocumentationString",value:function(s){var t=H(s.documentation);if(s.tags){var r=R(s.tags),i;try{for(r.s();!(i=r.n()).done;){var f=i.value;t+=`

`.concat(re(f))}}catch(b){r.e(b)}finally{r.f()}}return t}}]),e}(K);function re(l){var a="*@".concat(l.name,"*");if(l.name==="param"&&l.text){var e=fe(l.text),n=e[0],s=e.slice(1);a+="`".concat(n.text,"`"),s.length>0&&(a+=" \u2014 ".concat(s.map(function(t){return t.text}).join(" ")))}else Array.isArray(l.text)?a+=" \u2014 ".concat(l.text.map(function(t){return t.text}).join(" ")):l.text&&(a+=" \u2014 ".concat(l.text));return a}var ne=function(l){F(e,l);var a=M(e);function e(){var n;return P(this,e),n=a.apply(this,arguments),N(B(n),"signatureHelpTriggerCharacters",["(",","]),n}return O(e,[{key:"provideSignatureHelp",value:function(){var n=I(D().mark(function t(r,i,f,b){var m,h,o,p,d;return D().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return m=r.uri,h=r.getOffsetAt(i),v.next=4,this._worker(m);case 4:if(o=v.sent,!r.isDisposed()){v.next=7;break}return v.abrupt("return");case 7:return v.next=9,o.getSignatureHelpItems(m.toString(),h,{triggerReason:e._toSignatureHelpTriggerReason(b)});case 9:if(p=v.sent,!(!p||r.isDisposed())){v.next=12;break}return v.abrupt("return");case 12:return d={activeSignature:p.selectedItemIndex,activeParameter:p.argumentIndex,signatures:[]},v.abrupt("return",(p.items.forEach(function(u){var w={label:"",parameters:[]};w.documentation={value:H(u.documentation)},w.label+=H(u.prefixDisplayParts),u.parameters.forEach(function(k,S,L){var C=H(k.displayParts),j={label:C,documentation:{value:H(k.documentation)}};w.label+=C,w.parameters.push(j),S<L.length-1&&(w.label+=H(u.separatorDisplayParts))}),w.label+=H(u.suffixDisplayParts),d.signatures.push(w)}),{value:d,dispose:function(){}}));case 14:case"end":return v.stop()}},t,this)}));function s(t,r,i,f){return n.apply(this,arguments)}return s}()}],[{key:"_toSignatureHelpTriggerReason",value:function(s){switch(s.triggerKind){case c.languages.SignatureHelpTriggerKind.TriggerCharacter:return s.triggerCharacter?s.isRetrigger?{kind:"retrigger",triggerCharacter:s.triggerCharacter}:{kind:"characterTyped",triggerCharacter:s.triggerCharacter}:{kind:"invoked"};case c.languages.SignatureHelpTriggerKind.ContentChange:return s.isRetrigger?{kind:"retrigger"}:{kind:"invoked"};case c.languages.SignatureHelpTriggerKind.Invoke:default:return{kind:"invoked"}}}}]),e}(K),te=function(l){F(e,l);var a=M(e);function e(){return P(this,e),a.apply(this,arguments)}return O(e,[{key:"provideHover",value:function(){var n=I(D().mark(function t(r,i,f){var b,m,h,o,p,d,g;return D().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return b=r.uri,m=r.getOffsetAt(i),u.next=4,this._worker(b);case 4:if(h=u.sent,!r.isDisposed()){u.next=7;break}return u.abrupt("return");case 7:return u.next=9,h.getQuickInfoAtPosition(b.toString(),m);case 9:if(o=u.sent,!(!o||r.isDisposed())){u.next=12;break}return u.abrupt("return");case 12:return p=H(o.documentation),d=o.tags?o.tags.map(function(w){return re(w)}).join(`  

`):"",g=H(o.displayParts),u.abrupt("return",{range:this._textSpanToRange(r,o.textSpan),contents:[{value:"```typescript\n"+g+"\n```\n"},{value:p+(d?`

`+d:"")}]});case 14:case"end":return u.stop()}},t,this)}));function s(t,r,i){return n.apply(this,arguments)}return s}()}]),e}(K),ie=function(l){F(e,l);var a=M(e);function e(){return P(this,e),a.apply(this,arguments)}return O(e,[{key:"provideDocumentHighlights",value:function(){var n=I(D().mark(function t(r,i,f){var b=this,m,h,o,p;return D().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return m=r.uri,h=r.getOffsetAt(i),g.next=4,this._worker(m);case 4:if(o=g.sent,!r.isDisposed()){g.next=7;break}return g.abrupt("return");case 7:return g.next=9,o.getOccurrencesAtPosition(m.toString(),h);case 9:if(p=g.sent,!p||r.isDisposed()){g.next=12;break}return g.abrupt("return",p.map(function(v){return{range:b._textSpanToRange(r,v.textSpan),kind:v.isWriteAccess?c.languages.DocumentHighlightKind.Write:c.languages.DocumentHighlightKind.Text}}));case 12:case"end":return g.stop()}},t,this)}));function s(t,r,i){return n.apply(this,arguments)}return s}()}]),e}(K),se=function(l){F(e,l);var a=M(e);function e(n,s){var t;return P(this,e),t=a.call(this,s),t._libFiles=n,t}return O(e,[{key:"provideDefinition",value:function(){var n=I(D().mark(function t(r,i,f){var b,m,h,o,p,d,g,v,u;return D().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return b=r.uri,m=r.getOffsetAt(i),k.next=4,this._worker(b);case 4:if(h=k.sent,!r.isDisposed()){k.next=7;break}return k.abrupt("return");case 7:return k.next=9,h.getDefinitionAtPosition(b.toString(),m);case 9:if(o=k.sent,k.t0=!o||r.isDisposed(),k.t0){k.next=15;break}return k.next=14,this._libFiles.fetchLibFilesIfNecessary(o.map(function(S){return c.Uri.parse(S.fileName)}));case 14:k.t0=r.isDisposed();case 15:if(!k.t0){k.next=17;break}return k.abrupt("return");case 17:p=[],d=R(o);try{for(d.s();!(g=d.n()).done;)v=g.value,u=this._libFiles.getOrCreateModel(v.fileName),u&&p.push({uri:u.uri,range:this._textSpanToRange(u,v.textSpan)})}catch(S){d.e(S)}finally{d.f()}return k.abrupt("return",p);case 21:case"end":return k.stop()}},t,this)}));function s(t,r,i){return n.apply(this,arguments)}return s}()}]),e}(K),ae=function(l){F(e,l);var a=M(e);function e(n,s){var t;return P(this,e),t=a.call(this,s),t._libFiles=n,t}return O(e,[{key:"provideReferences",value:function(){var n=I(D().mark(function t(r,i,f,b){var m,h,o,p,d,g,v,u,w;return D().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return m=r.uri,h=r.getOffsetAt(i),S.next=4,this._worker(m);case 4:if(o=S.sent,!r.isDisposed()){S.next=7;break}return S.abrupt("return");case 7:return S.next=9,o.getReferencesAtPosition(m.toString(),h);case 9:if(p=S.sent,S.t0=!p||r.isDisposed(),S.t0){S.next=15;break}return S.next=14,this._libFiles.fetchLibFilesIfNecessary(p.map(function(L){return c.Uri.parse(L.fileName)}));case 14:S.t0=r.isDisposed();case 15:if(!S.t0){S.next=17;break}return S.abrupt("return");case 17:d=[],g=R(p);try{for(g.s();!(v=g.n()).done;)u=v.value,w=this._libFiles.getOrCreateModel(u.fileName),w&&d.push({uri:w.uri,range:this._textSpanToRange(w,u.textSpan)})}catch(L){g.e(L)}finally{g.f()}return S.abrupt("return",d);case 21:case"end":return S.stop()}},t,this)}));function s(t,r,i,f){return n.apply(this,arguments)}return s}()}]),e}(K),ue=function(l){F(e,l);var a=M(e);function e(){return P(this,e),a.apply(this,arguments)}return O(e,[{key:"provideDocumentSymbols",value:function(){var n=I(D().mark(function t(r,i){var f=this,b,m,h,o,p;return D().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return b=r.uri,g.next=3,this._worker(b);case 3:if(m=g.sent,!r.isDisposed()){g.next=6;break}return g.abrupt("return");case 6:return g.next=8,m.getNavigationBarItems(b.toString());case 8:if(h=g.sent,!(!h||r.isDisposed())){g.next=11;break}return g.abrupt("return");case 11:return o=function v(u,w,k){var S={name:w.text,detail:"",kind:E[w.kind]||c.languages.SymbolKind.Variable,range:f._textSpanToRange(r,w.spans[0]),selectionRange:f._textSpanToRange(r,w.spans[0]),tags:[]};if(k&&(S.containerName=k),w.childItems&&w.childItems.length>0){var L=R(w.childItems),C;try{for(L.s();!(C=L.n()).done;){var j=C.value;v(u,j,S.name)}}catch(Ae){L.e(Ae)}finally{L.f()}}u.push(S)},p=[],g.abrupt("return",(h.forEach(function(v){return o(p,v)}),p));case 14:case"end":return g.stop()}},t,this)}));function s(t,r){return n.apply(this,arguments)}return s}()}]),e}(K),y=O(function l(){P(this,l)});A(y,"unknown",""),A(y,"keyword","keyword"),A(y,"script","script"),A(y,"module","module"),A(y,"class","class"),A(y,"interface","interface"),A(y,"type","type"),A(y,"enum","enum"),A(y,"variable","var"),A(y,"localVariable","local var"),A(y,"function","function"),A(y,"localFunction","local function"),A(y,"memberFunction","method"),A(y,"memberGetAccessor","getter"),A(y,"memberSetAccessor","setter"),A(y,"memberVariable","property"),A(y,"constructorImplementation","constructor"),A(y,"callSignature","call"),A(y,"indexSignature","index"),A(y,"constructSignature","construct"),A(y,"parameter","parameter"),A(y,"typeParameter","type parameter"),A(y,"primitiveType","primitive type"),A(y,"label","label"),A(y,"alias","alias"),A(y,"const","const"),A(y,"let","let"),A(y,"warning","warning");var E=Object.create(null);E[y.module]=c.languages.SymbolKind.Module,E[y.class]=c.languages.SymbolKind.Class,E[y.enum]=c.languages.SymbolKind.Enum,E[y.interface]=c.languages.SymbolKind.Interface,E[y.memberFunction]=c.languages.SymbolKind.Method,E[y.memberVariable]=c.languages.SymbolKind.Property,E[y.memberGetAccessor]=c.languages.SymbolKind.Property,E[y.memberSetAccessor]=c.languages.SymbolKind.Property,E[y.variable]=c.languages.SymbolKind.Variable,E[y.const]=c.languages.SymbolKind.Variable,E[y.localVariable]=c.languages.SymbolKind.Variable,E[y.variable]=c.languages.SymbolKind.Variable,E[y.function]=c.languages.SymbolKind.Function,E[y.localFunction]=c.languages.SymbolKind.Function;var W=function(l){F(e,l);var a=M(e);function e(){return P(this,e),a.apply(this,arguments)}return O(e,[{key:"_convertTextChanges",value:function(s,t){return{text:t.newText,range:this._textSpanToRange(s,t.span)}}}],[{key:"_convertOptions",value:function(s){return{ConvertTabsToSpaces:s.insertSpaces,TabSize:s.tabSize,IndentSize:s.tabSize,IndentStyle:2,NewLineCharacter:`
`,InsertSpaceAfterCommaDelimiter:!0,InsertSpaceAfterSemicolonInForStatements:!0,InsertSpaceBeforeAndAfterBinaryOperators:!0,InsertSpaceAfterKeywordsInControlFlowStatements:!0,InsertSpaceAfterFunctionKeywordForAnonymousFunctions:!0,InsertSpaceAfterOpeningAndBeforeClosingNonemptyParenthesis:!1,InsertSpaceAfterOpeningAndBeforeClosingNonemptyBrackets:!1,InsertSpaceAfterOpeningAndBeforeClosingTemplateStringBraces:!1,PlaceOpenBraceOnNewLineForControlBlocks:!1,PlaceOpenBraceOnNewLineForFunctions:!1}}}]),e}(K),oe=function(l){F(e,l);var a=M(e);function e(){return P(this,e),a.apply(this,arguments)}return O(e,[{key:"provideDocumentRangeFormattingEdits",value:function(){var n=I(D().mark(function t(r,i,f,b){var m=this,h,o,p,d,g;return D().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return h=r.uri,o=r.getOffsetAt({lineNumber:i.startLineNumber,column:i.startColumn}),p=r.getOffsetAt({lineNumber:i.endLineNumber,column:i.endColumn}),u.next=5,this._worker(h);case 5:if(d=u.sent,!r.isDisposed()){u.next=8;break}return u.abrupt("return");case 8:return u.next=10,d.getFormattingEditsForRange(h.toString(),o,p,W._convertOptions(f));case 10:if(g=u.sent,!g||r.isDisposed()){u.next=13;break}return u.abrupt("return",g.map(function(w){return m._convertTextChanges(r,w)}));case 13:case"end":return u.stop()}},t,this)}));function s(t,r,i,f){return n.apply(this,arguments)}return s}()}]),e}(W),le=function(l){F(e,l);var a=M(e);function e(){return P(this,e),a.apply(this,arguments)}return O(e,[{key:"autoFormatTriggerCharacters",get:function(){return[";","}",`
`]}},{key:"provideOnTypeFormattingEdits",value:function(){var n=I(D().mark(function t(r,i,f,b,m){var h=this,o,p,d,g;return D().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return o=r.uri,p=r.getOffsetAt(i),u.next=4,this._worker(o);case 4:if(d=u.sent,!r.isDisposed()){u.next=7;break}return u.abrupt("return");case 7:return u.next=9,d.getFormattingEditsAfterKeystroke(o.toString(),p,f,W._convertOptions(b));case 9:if(g=u.sent,!g||r.isDisposed()){u.next=12;break}return u.abrupt("return",g.map(function(w){return h._convertTextChanges(r,w)}));case 12:case"end":return u.stop()}},t,this)}));function s(t,r,i,f,b){return n.apply(this,arguments)}return s}()}]),e}(W),ce=function(l){F(e,l);var a=M(e);function e(){return P(this,e),a.apply(this,arguments)}return O(e,[{key:"provideCodeActions",value:function(){var n=I(D().mark(function t(r,i,f,b){var m=this,h,o,p,d,g,v,u;return D().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return h=r.uri,o=r.getOffsetAt({lineNumber:i.startLineNumber,column:i.startColumn}),p=r.getOffsetAt({lineNumber:i.endLineNumber,column:i.endColumn}),d=W._convertOptions(r.getOptions()),g=f.markers.filter(function(S){return S.code}).map(function(S){return S.code}).map(Number),k.next=7,this._worker(h);case 7:if(v=k.sent,!r.isDisposed()){k.next=10;break}return k.abrupt("return");case 10:return k.next=12,v.getCodeFixesAtPosition(h.toString(),o,p,g,d);case 12:return u=k.sent,k.abrupt("return",!u||r.isDisposed()?{actions:[],dispose:function(){}}:{actions:u.filter(function(S){return S.changes.filter(function(L){return L.isNewFile}).length===0}).map(function(S){return m._tsCodeFixActionToMonacoCodeAction(r,f,S)}),dispose:function(){}});case 14:case"end":return k.stop()}},t,this)}));function s(t,r,i,f){return n.apply(this,arguments)}return s}()},{key:"_tsCodeFixActionToMonacoCodeAction",value:function(s,t,r){var i=[],f=R(r.changes),b;try{for(f.s();!(b=f.n()).done;){var m=b.value,h=R(m.textChanges),o;try{for(h.s();!(o=h.n()).done;){var p=o.value;i.push({resource:s.uri,versionId:void 0,textEdit:{range:this._textSpanToRange(s,p.span),text:p.newText}})}}catch(d){h.e(d)}finally{h.f()}}}catch(d){f.e(d)}finally{f.f()}return{title:r.description,edit:{edits:i},diagnostics:t.markers,kind:"quickfix"}}}]),e}(W),de=function(l){F(e,l);var a=M(e);function e(n,s){var t;return P(this,e),t=a.call(this,s),t._libFiles=n,t}return O(e,[{key:"provideRenameEdits",value:function(){var n=I(D().mark(function t(r,i,f,b){var m,h,o,p,d,g,v,u,w,k,S;return D().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return m=r.uri,h=m.toString(),o=r.getOffsetAt(i),C.next=5,this._worker(m);case 5:if(p=C.sent,!r.isDisposed()){C.next=8;break}return C.abrupt("return");case 8:return C.next=10,p.getRenameInfo(h,o,{allowRenameOfImportPath:!1});case 10:if(d=C.sent,d.canRename!==!1){C.next=13;break}return C.abrupt("return",{edits:[],rejectReason:d.localizedErrorMessage});case 13:if(d.fileToRename===void 0){C.next=15;break}throw new Error("Renaming files is not supported.");case 15:return C.next=17,p.findRenameLocations(h,o,!1,!1,!1);case 17:if(g=C.sent,!(!g||r.isDisposed())){C.next=20;break}return C.abrupt("return");case 20:v=[],u=R(g),C.prev=22,u.s();case 24:if((w=u.n()).done){C.next=34;break}if(k=w.value,S=this._libFiles.getOrCreateModel(k.fileName),!S){C.next=31;break}v.push({resource:S.uri,versionId:void 0,textEdit:{range:this._textSpanToRange(S,k.textSpan),text:f}}),C.next=32;break;case 31:throw new Error("Unknown file ".concat(k.fileName,"."));case 32:C.next=24;break;case 34:C.next=39;break;case 36:C.prev=36,C.t0=C.catch(22),u.e(C.t0);case 39:return C.prev=39,u.f(),C.finish(39);case 42:return C.abrupt("return",{edits:v});case 43:case"end":return C.stop()}},t,this,[[22,36,39,42]])}));function s(t,r,i,f){return n.apply(this,arguments)}return s}()}]),e}(K),pe=function(l){F(e,l);var a=M(e);function e(){return P(this,e),a.apply(this,arguments)}return O(e,[{key:"provideInlayHints",value:function(){var n=I(D().mark(function t(r,i,f){var b=this,m,h,o,p,d;return D().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return m=r.uri,h=m.toString(),o=r.getOffsetAt({lineNumber:i.startLineNumber,column:i.startColumn}),p=r.getOffsetAt({lineNumber:i.endLineNumber,column:i.endColumn}),v.next=6,this._worker(m);case 6:if(d=v.sent,!r.isDisposed()){v.next=11;break}v.t0=null,v.next=16;break;case 11:return v.next=13,d.provideInlayHints(h,o,p);case 13:v.t1=v.sent.map(function(u){return G(G({},u),{},{label:u.text,position:r.getPositionAt(u.position),kind:b._convertHintKind(u.kind)})}),v.t2=function(){},v.t0={hints:v.t1,dispose:v.t2};case 16:return v.abrupt("return",v.t0);case 17:case"end":return v.stop()}},t,this)}));function s(t,r,i){return n.apply(this,arguments)}return s}()},{key:"_convertHintKind",value:function(s){switch(s){case"Parameter":return c.languages.InlayHintKind.Parameter;case"Type":return c.languages.InlayHintKind.Type;default:return c.languages.InlayHintKind.Type}}}]),e}(K),U,V;function we(l){V=ge(l,"typescript")}function Se(l){U=ge(l,"javascript")}function Ce(){return new Promise(function(l,a){if(!U)return a("JavaScript not registered!");l(U)})}function De(){return new Promise(function(l,a){if(!V)return a("TypeScript not registered!");l(V)})}function ge(l,a){var e=new Y(a,l),n=function(){return e.getLanguageServiceWorker.apply(e,arguments)},s=new Z(n);return c.languages.registerCompletionItemProvider(a,new ee(n)),c.languages.registerSignatureHelpProvider(a,new ne(n)),c.languages.registerHoverProvider(a,new te(n)),c.languages.registerDocumentHighlightProvider(a,new ie(n)),c.languages.registerDefinitionProvider(a,new se(s,n)),c.languages.registerReferenceProvider(a,new ae(s,n)),c.languages.registerDocumentSymbolProvider(a,new ue(n)),c.languages.registerDocumentRangeFormattingEditProvider(a,new oe(n)),c.languages.registerOnTypeFormattingEditProvider(a,new le(n)),c.languages.registerCodeActionProvider(a,new ce(n)),c.languages.registerRenameProvider(a,new de(s,n)),c.languages.registerInlayHintsProvider(a,new pe(n)),new q(s,l,a,n),n}}}]);
